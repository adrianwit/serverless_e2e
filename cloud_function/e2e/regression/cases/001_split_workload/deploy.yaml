pipeline:
  deploy:
    action: exec:run
    target: $target
    sleepTimeMs: 1500
    terminators:
      - Do you want to continue
    errors:
      - ERROR
    env:
      GOOGLE_APPLICATION_CREDENTIALS: ${env.HOME}/.secret/${gcSecrets}.json
    commands:
      - cd $appPath
      - go build
      - export PATH=$PATH:${env.HOME}/google-cloud-sdk/bin/
      - gcloud config set project $projectID
      - #gcloud alpha functions delete SplitWorkload
      - ${cmd[4].stdout}:/Do you want to continue/ ? Y
      - gcloud alpha functions deploy SplitWorkload --entry-point SplitWorkloadFn --trigger-resource my_e2ebucket --trigger-event google.storage.object.finalize --runtime go111



